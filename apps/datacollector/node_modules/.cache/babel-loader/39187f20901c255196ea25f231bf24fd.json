{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\webWork\\\\evilcook\\\\src\\\\logic\\\\jsonbuilder.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport './jsonbuilder.css';\nvar viewport = {\n  height: window.innerHeight,\n  width: window.innerWidth\n};\nvar startPos = {\n  x: 0,\n  y: 0\n};\nvar dragOffset = {\n  x: 0,\n  y: 0\n};\nvar hitBox = {\n  top: {\n    val: 0,\n    drop: 0,\n    hit: false\n  },\n  right: {\n    val: 0,\n    drop: 0,\n    hit: false\n  },\n  bottom: {\n    val: 0,\n    drop: 0,\n    hit: false\n  },\n  left: {\n    val: 0,\n    drop: 0,\n    hit: false\n  }\n};\nlet logTick = true;\n\nconst logTimer = () => {\n  logTick = false;\n  setTimeout(() => {\n    logTick = true;\n  }, 200);\n};\n\nvar mouseMove, mouseUp;\n\nconst JSONBuilder = () => {\n  _s();\n\n  const ref = useRef(null);\n\n  function handleMouseMove(e, el) {\n    let screenPos = e.target.getBoundingClientRect();\n    hitBox.top.val = screenPos.top;\n    hitBox.right.val = screenPos.right;\n    hitBox.bottom.val = screenPos.bottom;\n    hitBox.left.val = screenPos.left; // hit detection top\n\n    if (hitBox.top.val >= 0 && !hitBox.top.hit && hitBox.bottom.val <= viewport.height && !hitBox.bottom.hit) {\n      dragOffset.y = e.screenY - startPos.y;\n    } else if (hitBox.top.val <= 0 && !hitBox.top.hit) {\n      hitBox.top.hit = true;\n      hitBox.top.drop = e.screenY;\n    } else if (e.screenY > hitBox.top.drop && hitBox.top.hit) {\n      hitBox.top.hit = false;\n      !hitBox.bottom.hit && (dragOffset.y += 1);\n    } else if (hitBox.bottom.val >= viewport.height && !hitBox.bottom.hit) {\n      hitBox.bottom.hit = true;\n      hitBox.bottom.drop = e.screenY;\n    } else if (e.screenY < hitBox.bottom.drop && hitBox.bottom.hit) {\n      hitBox.bottom.hit = false;\n      !hitBox.top.hit && (dragOffset.y -= 1);\n    }\n\n    logTick && console.log(e.screenY, hitBox.bottom.drop, dragOffset.y, hitBox.bottom.val, viewport.height, hitBox.bottom.hit); // hit detection right\n\n    if (hitBox.right.val <= viewport.width && !hitBox.right.hit) {\n      dragOffset.x = e.screenX - startPos.x;\n    } else if (!hitBox.right.hit) {\n      hitBox.right.hit = true;\n      hitBox.right.drop = e.screenX;\n    } else if (e.screenX < hitBox.right.drop) {\n      hitBox.right.hit = false;\n      hitBox.right.val = viewport.width - 1;\n      dragOffset.x -= 1;\n    } // logTick && console.log(e.screenX, hitBox.right.drop, dragOffset.x, hitBox.right.val, viewport.width, hitBox.right.hit);\n\n\n    e.stopPropagation();\n    e.preventDefault();\n    el.target.style.transform = `translate3d( ${dragOffset.x}px, ${dragOffset.y}px,0 )`; // console.log(e.target.getBoundingClientRect())\n\n    logTick && logTimer();\n  }\n\n  function handleMouseUp(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    window.removeEventListener('mousemove', mouseMove);\n    window.removeEventListener('mouseup', mouseUp);\n  }\n\n  function handleMouseDown(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    mouseMove = event => handleMouseMove(event, e);\n\n    mouseUp = event => handleMouseUp(event, e);\n\n    window.addEventListener('mousemove', mouseMove);\n    window.addEventListener('mouseup', mouseUp);\n    startPos = {\n      x: e.screenX - dragOffset.x,\n      y: e.screenY - dragOffset.y\n    };\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `JSON-Builder`,\n    onMouseDown: handleMouseDown,\n    ref: ref\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 3\n  }, this);\n};\n\n_s(JSONBuilder, \"QMBuJFIdzLIeqBcFwhMf246mjOM=\");\n\n_c = JSONBuilder;\nexport default JSONBuilder;\n\nvar _c;\n\n$RefreshReg$(_c, \"JSONBuilder\");","map":{"version":3,"sources":["C:/webWork/evilcook/src/logic/jsonbuilder.jsx"],"names":["React","useRef","viewport","height","window","innerHeight","width","innerWidth","startPos","x","y","dragOffset","hitBox","top","val","drop","hit","right","bottom","left","logTick","logTimer","setTimeout","mouseMove","mouseUp","JSONBuilder","ref","handleMouseMove","e","el","screenPos","target","getBoundingClientRect","screenY","console","log","screenX","stopPropagation","preventDefault","style","transform","handleMouseUp","removeEventListener","handleMouseDown","event","addEventListener"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\r\nimport './jsonbuilder.css';\r\n\r\n\r\n\r\nvar viewport = {\r\n\theight: window.innerHeight,\r\n\twidth: window.innerWidth,\r\n}\r\n\r\n\r\nvar startPos = { x: 0, y: 0 }\r\nvar dragOffset = { x: 0, y: 0 }\r\nvar hitBox = {\r\n\ttop: {\r\n\t\tval: 0,\r\n\t\tdrop: 0,\r\n\t\thit: false,\r\n\t},\r\n\tright: {\r\n\t\tval: 0,\r\n\t\tdrop: 0,\r\n\t\thit: false,\r\n\t},\r\n\tbottom: {\r\n\t\tval: 0,\r\n\t\tdrop: 0,\r\n\t\thit: false,\r\n\t},\r\n\tleft: {\r\n\t\tval: 0,\r\n\t\tdrop: 0,\r\n\t\thit: false,\r\n\t}\r\n}\r\n\r\nlet logTick = true;\r\nconst logTimer = () => {\r\n\tlogTick = false;\r\n\tsetTimeout(()=>{\r\n\t\tlogTick = true;\r\n\t}, 200);\r\n}\r\nvar mouseMove, mouseUp;\r\nconst JSONBuilder = () => {\r\n\tconst ref = useRef(null);\r\n\r\n\tfunction handleMouseMove(e, el) {\r\n\t\tlet screenPos = e.target.getBoundingClientRect();\r\n\t\thitBox.top.val = screenPos.top;\r\n\t\thitBox.right.val = screenPos.right;\r\n\t\thitBox.bottom.val = screenPos.bottom;\r\n\t\thitBox.left.val = screenPos.left;\r\n\r\n\t\t\r\n\t\t// hit detection top\r\n\t\tif ( hitBox.top.val >= 0 && !hitBox.top.hit && hitBox.bottom.val <= viewport.height && !hitBox.bottom.hit ) {\r\n\t\t\tdragOffset.y = e.screenY - startPos.y;\r\n\t\t} else if ( hitBox.top.val <= 0 && !hitBox.top.hit ) {\r\n\t\t\thitBox.top.hit = true;\r\n\t\t\thitBox.top.drop = e.screenY;\r\n\t\t} else if ( e.screenY > hitBox.top.drop && hitBox.top.hit ) {\r\n\t\t\thitBox.top.hit = false;\r\n\t\t\t!hitBox.bottom.hit && (dragOffset.y += 1);\r\n\t\t} else if ( hitBox.bottom.val >= viewport.height && !hitBox.bottom.hit ) {\r\n\t\t\thitBox.bottom.hit = true;\r\n\t\t\thitBox.bottom.drop = e.screenY;\r\n\t\t} else if ( e.screenY < hitBox.bottom.drop && hitBox.bottom.hit ) {\r\n\t\t\thitBox.bottom.hit = false;\r\n\t\t\t!hitBox.top.hit && (dragOffset.y -= 1);\r\n\t\t}\r\n\r\n\t\tlogTick && console.log(e.screenY, hitBox.bottom.drop, dragOffset.y, hitBox.bottom.val, viewport.height, hitBox.bottom.hit);\r\n\r\n\t\t// hit detection right\r\n\t\tif ( hitBox.right.val <= viewport.width && !hitBox.right.hit ) {\r\n\t\t\tdragOffset.x = e.screenX - startPos.x;\r\n\t\t} else if ( !hitBox.right.hit ) {\r\n\t\t\thitBox.right.hit = true;\r\n\t\t\thitBox.right.drop = e.screenX;\r\n\t\t} else if ( e.screenX < hitBox.right.drop ) {\r\n\t\t\thitBox.right.hit = false;\r\n\t\t\thitBox.right.val = viewport.width-1;\r\n\t\t\tdragOffset.x -= 1;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// logTick && console.log(e.screenX, hitBox.right.drop, dragOffset.x, hitBox.right.val, viewport.width, hitBox.right.hit);\r\n\t\t\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\t\tel.target.style.transform = `translate3d( ${ dragOffset.x }px, ${ dragOffset.y }px,0 )`;\r\n\t\t// console.log(e.target.getBoundingClientRect())\r\n\t\tlogTick && logTimer();\r\n  }\r\n\r\n  function handleMouseUp(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\t\twindow.removeEventListener( 'mousemove', mouseMove );\r\n\t\twindow.removeEventListener( 'mouseup', mouseUp );\r\n  }\r\n\r\n  function handleMouseDown(e) {\r\n\t\te.stopPropagation();\r\n    e.preventDefault();\r\n\t\tmouseMove = (event) => handleMouseMove(event, e);\r\n\t\tmouseUp = (event) => handleMouseUp(event, e);\r\n\t\twindow.addEventListener( 'mousemove', mouseMove );\r\n\t\twindow.addEventListener( 'mouseup', mouseUp );\r\n\t\tstartPos = {\r\n\t\t\tx: e.screenX - dragOffset.x,\r\n\t\t\ty: e.screenY - dragOffset.y,\r\n\t\t}\r\n  }\r\n\r\n\treturn(\r\n\t\t<div className={ `JSON-Builder` } onMouseDown={ handleMouseDown } ref={ ref }>\r\n\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default JSONBuilder;"]},"metadata":{},"sourceType":"module"}